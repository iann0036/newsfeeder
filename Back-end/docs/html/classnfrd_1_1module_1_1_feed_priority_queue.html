<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>News Feeder Refresh Daemon (nfrd): nfrd::module::FeedPriorityQueue Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">News Feeder Refresh Daemon (nfrd)
   </div>
   <div id="projectbrief">Back-end of News Feeder - An online news aggregator</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.1.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacenfrd.html">nfrd</a></li><li class="navelem"><a class="el" href="namespacenfrd_1_1module.html">module</a></li><li class="navelem"><a class="el" href="classnfrd_1_1module_1_1_feed_priority_queue.html">FeedPriorityQueue</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a>  </div>
  <div class="headertitle">
<div class="title">nfrd::module::FeedPriorityQueue Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Implements a queueing/threading model.  
 <a href="classnfrd_1_1module_1_1_feed_priority_queue.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="_feed_priority_queue_8h_source.html">FeedPriorityQueue.h</a>&gt;</code></p>

<p><a href="classnfrd_1_1module_1_1_feed_priority_queue-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:acc15d3e4750ce4415b04a19b6e701001"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnfrd_1_1module_1_1_feed_priority_queue.html#acc15d3e4750ce4415b04a19b6e701001">FeedPriorityQueue</a> (const <a class="el" href="classnfrd_1_1config_1_1_config_manager.html">nfrd::config::ConfigManager</a> &amp;<a class="el" href="classnfrd_1_1module_1_1_feed_priority_queue.html#a0af620070b3f6b9fc2f15fd72a7781a3">config</a>, const <a class="el" href="classnfrd_1_1log_1_1_log_manager.html">nfrd::log::LogManager</a> &amp;<a class="el" href="classnfrd_1_1module_1_1_feed_priority_queue.html#ad831b7f66aceec212373feef445acaf2">log</a>, int reserve=0)</td></tr>
<tr class="memdesc:acc15d3e4750ce4415b04a19b6e701001"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialising Constructor for <a class="el" href="classnfrd_1_1module_1_1_feed_priority_queue.html" title="Implements a queueing/threading model.">FeedPriorityQueue</a>.  <a href="#acc15d3e4750ce4415b04a19b6e701001"></a><br/></td></tr>
<tr class="memitem:a5faeaf386c1986af6b401942a6d499f9"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnfrd_1_1module_1_1_feed_priority_queue.html#a5faeaf386c1986af6b401942a6d499f9">~FeedPriorityQueue</a> ()</td></tr>
<tr class="memdesc:a5faeaf386c1986af6b401942a6d499f9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Delete all dynamic memory, if any.  <a href="#a5faeaf386c1986af6b401942a6d499f9"></a><br/></td></tr>
<tr class="memitem:ac300529968cafee4c247ba1ff022320f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnfrd_1_1module_1_1_feed_priority_queue.html#ac300529968cafee4c247ba1ff022320f">PopFeed</a> (<a class="el" href="classnfrd_1_1module_1_1_queue_item.html">QueueItem</a> *&amp;item)</td></tr>
<tr class="memdesc:ac300529968cafee4c247ba1ff022320f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Removes a feed from the prioritised queue for processing.  <a href="#ac300529968cafee4c247ba1ff022320f"></a><br/></td></tr>
<tr class="memitem:a800c36c9d6fe69b513da269dfb22befc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnfrd_1_1module_1_1_feed_priority_queue.html#a800c36c9d6fe69b513da269dfb22befc">PushFeed</a> (<a class="el" href="classnfrd_1_1module_1_1_queue_item.html">QueueItem</a> *item)</td></tr>
<tr class="memdesc:a800c36c9d6fe69b513da269dfb22befc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds a feed on to the queue.  <a href="#a800c36c9d6fe69b513da269dfb22befc"></a><br/></td></tr>
<tr class="memitem:a9520dc36eb1167ca4361f958f94414f9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnfrd_1_1module_1_1_feed_priority_queue.html#a9520dc36eb1167ca4361f958f94414f9">Start</a> ()</td></tr>
<tr class="memdesc:a9520dc36eb1167ca4361f958f94414f9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start the priority queue/thread.  <a href="#a9520dc36eb1167ca4361f958f94414f9"></a><br/></td></tr>
<tr class="memitem:a117251d3ae7e96afbeec75d4fe1a8964"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnfrd_1_1module_1_1_feed_priority_queue.html#a117251d3ae7e96afbeec75d4fe1a8964">Stop</a> ()</td></tr>
<tr class="memdesc:a117251d3ae7e96afbeec75d4fe1a8964"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stop the priority queue/thread<br/>
 Only call priority queue stop when you are 100% sure that<br/>
 nothing else is using the queue.  <a href="#a117251d3ae7e96afbeec75d4fe1a8964"></a><br/></td></tr>
<tr class="memitem:a45c30b19bce1ca34d44814d8cd88d4bf"><td class="memItemLeft" align="right" valign="top">boost::thread *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnfrd_1_1module_1_1_feed_priority_queue.html#a45c30b19bce1ca34d44814d8cd88d4bf">GetThread</a> ()</td></tr>
<tr class="memdesc:a45c30b19bce1ca34d44814d8cd88d4bf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the thread that this priority queue is running under.  <a href="#a45c30b19bce1ca34d44814d8cd88d4bf"></a><br/></td></tr>
<tr class="memitem:af2939a926d1338e4d771c470b36a10e6"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="classnfrd_1_1module_1_1_queue_item.html">QueueItem</a> * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnfrd_1_1module_1_1_feed_priority_queue.html#af2939a926d1338e4d771c470b36a10e6">GetAllItems</a> ()</td></tr>
<tr class="memdesc:af2939a926d1338e4d771c470b36a10e6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a vector of all queue items.  <a href="#af2939a926d1338e4d771c470b36a10e6"></a><br/></td></tr>
<tr class="memitem:a1d84a4de70d5942c5eac4b577c8c35a3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnfrd_1_1module_1_1_feed_priority_queue.html#a1d84a4de70d5942c5eac4b577c8c35a3">SetNumberOfUsersInSystem</a> (int <a class="el" href="classnfrd_1_1module_1_1_feed_priority_queue.html#a6341ca280b2616fea0e80ab3ff48b1b1">numberOfUsersInSystem</a>)</td></tr>
<tr class="memdesc:a1d84a4de70d5942c5eac4b577c8c35a3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the number of users in the system.  <a href="#a1d84a4de70d5942c5eac4b577c8c35a3"></a><br/></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a0f734801e447f59e0a24df00c1e2fda9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnfrd_1_1module_1_1_feed_priority_queue.html#a0f734801e447f59e0a24df00c1e2fda9">MainLoop</a> ()</td></tr>
<tr class="memdesc:a0f734801e447f59e0a24df00c1e2fda9"><td class="mdescLeft">&#160;</td><td class="mdescRight">The main loop for the main queueing thread of the crawler <br/>
 waits for work executes IterateOnce when it has some.  <a href="#a0f734801e447f59e0a24df00c1e2fda9"></a><br/></td></tr>
<tr class="memitem:a04a6880d52c95fce8fd236d35e83ac13"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnfrd_1_1module_1_1_feed_priority_queue.html#a04a6880d52c95fce8fd236d35e83ac13">IterateOnce</a> ()</td></tr>
<tr class="memdesc:a04a6880d52c95fce8fd236d35e83ac13"><td class="mdescLeft">&#160;</td><td class="mdescRight">Processes the priority queue (aka heap, aka vector) and<br/>
 the incoming and outgoing queues to ensure that they are<br/>
 all up to date.  <a href="#a04a6880d52c95fce8fd236d35e83ac13"></a><br/></td></tr>
<tr class="memitem:aab7bfe79d1fe3df9883931bc072ae2f7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnfrd_1_1module_1_1_feed_priority_queue.html#aab7bfe79d1fe3df9883931bc072ae2f7">StartThreads</a> ()</td></tr>
<tr class="memdesc:aab7bfe79d1fe3df9883931bc072ae2f7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Setup and run all queue worker threads (<a class="el" href="classnfrd_1_1module_1_1_crawler_thread.html" title="A worker class representing a thread.">CrawlerThread</a>)  <a href="#aab7bfe79d1fe3df9883931bc072ae2f7"></a><br/></td></tr>
<tr class="memitem:ae8a3cc2ceded41cbb6bc5d39ef50280c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnfrd_1_1module_1_1_feed_priority_queue.html#ae8a3cc2ceded41cbb6bc5d39ef50280c">CleanupQueue</a> ()</td></tr>
<tr class="memdesc:ae8a3cc2ceded41cbb6bc5d39ef50280c"><td class="mdescLeft">&#160;</td><td class="mdescRight">When this module is stopped, cleanup queue is called to <br/>
 persist items back to the database.  <a href="#ae8a3cc2ceded41cbb6bc5d39ef50280c"></a><br/></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:ab970d83a4d27d49c4d19537f3d38d0fc"><td class="memItemLeft" align="right" valign="top">boost::mutex&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnfrd_1_1module_1_1_feed_priority_queue.html#ab970d83a4d27d49c4d19537f3d38d0fc">incomingMutex</a></td></tr>
<tr class="memdesc:ab970d83a4d27d49c4d19537f3d38d0fc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Mutex to synchronise access to the incoming queue.  <a href="#ab970d83a4d27d49c4d19537f3d38d0fc"></a><br/></td></tr>
<tr class="memitem:aef8b21c579190f4e62c4b23d3870e671"><td class="memItemLeft" align="right" valign="top">boost::mutex&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnfrd_1_1module_1_1_feed_priority_queue.html#aef8b21c579190f4e62c4b23d3870e671">outgoingMutex</a></td></tr>
<tr class="memdesc:aef8b21c579190f4e62c4b23d3870e671"><td class="mdescLeft">&#160;</td><td class="mdescRight">Mutex to synchronise access to the outgoing queue.  <a href="#aef8b21c579190f4e62c4b23d3870e671"></a><br/></td></tr>
<tr class="memitem:a059a9416cb88fc8a73e1ad0932a0d58c"><td class="memItemLeft" align="right" valign="top">boost::mutex&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnfrd_1_1module_1_1_feed_priority_queue.html#a059a9416cb88fc8a73e1ad0932a0d58c">updatedMutex</a></td></tr>
<tr class="memdesc:a059a9416cb88fc8a73e1ad0932a0d58c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Mutex to synchronise access to the outgoingHasChanged and incomingHasChanged variables.  <a href="#a059a9416cb88fc8a73e1ad0932a0d58c"></a><br/></td></tr>
<tr class="memitem:a14562cabf4c98e481c43b124dfd6a200"><td class="memItemLeft" align="right" valign="top">boost::mutex&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnfrd_1_1module_1_1_feed_priority_queue.html#a14562cabf4c98e481c43b124dfd6a200">heapMutex</a></td></tr>
<tr class="memdesc:a14562cabf4c98e481c43b124dfd6a200"><td class="mdescLeft">&#160;</td><td class="mdescRight">Mutex to synchronise access to the internal heap.  <a href="#a14562cabf4c98e481c43b124dfd6a200"></a><br/></td></tr>
<tr class="memitem:a5fb97a0b063d47f04f88838f2319ed14"><td class="memItemLeft" align="right" valign="top">boost::condition_variable&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnfrd_1_1module_1_1_feed_priority_queue.html#a5fb97a0b063d47f04f88838f2319ed14">outgoingQueueCondition</a></td></tr>
<tr class="memdesc:a5fb97a0b063d47f04f88838f2319ed14"><td class="mdescLeft">&#160;</td><td class="mdescRight">Condition for waiting on more items to be available in the outgoing queue for the worker threads (notified by the main queueing thread)  <a href="#a5fb97a0b063d47f04f88838f2319ed14"></a><br/></td></tr>
<tr class="memitem:a0da96988220a5a3dd4ad7fb2f2ac5ec4"><td class="memItemLeft" align="right" valign="top">boost::condition_variable&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnfrd_1_1module_1_1_feed_priority_queue.html#a0da96988220a5a3dd4ad7fb2f2ac5ec4">queueUpdateCondition</a></td></tr>
<tr class="memdesc:a0da96988220a5a3dd4ad7fb2f2ac5ec4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Condition for the main queueing thread to wait on PushFeed and PopFeed executions (notified by the worker threads)  <a href="#a0da96988220a5a3dd4ad7fb2f2ac5ec4"></a><br/></td></tr>
<tr class="memitem:a15603b252caef5f4eb2cf05f32fd09b0"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="classnfrd_1_1module_1_1_queue_item.html">QueueItem</a> * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnfrd_1_1module_1_1_feed_priority_queue.html#a15603b252caef5f4eb2cf05f32fd09b0">itemQueue</a></td></tr>
<tr class="memdesc:a15603b252caef5f4eb2cf05f32fd09b0"><td class="mdescLeft">&#160;</td><td class="mdescRight">The main priority queue (heap) only the main queueing thread is allowed to touch this!  <a href="#a15603b252caef5f4eb2cf05f32fd09b0"></a><br/></td></tr>
<tr class="memitem:a47b8166e98beb2c3411d37c829d6cc3b"><td class="memItemLeft" align="right" valign="top">std::queue&lt; <a class="el" href="classnfrd_1_1module_1_1_queue_item.html">QueueItem</a> * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnfrd_1_1module_1_1_feed_priority_queue.html#a47b8166e98beb2c3411d37c829d6cc3b">incomingQueue</a></td></tr>
<tr class="memdesc:a47b8166e98beb2c3411d37c829d6cc3b"><td class="mdescLeft">&#160;</td><td class="mdescRight">A buffer queue for any incoming (PushFeed) items.  <a href="#a47b8166e98beb2c3411d37c829d6cc3b"></a><br/></td></tr>
<tr class="memitem:af720bf38f8d6d8da7837462d76e7b2ae"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="classnfrd_1_1module_1_1_queue_item.html">QueueItem</a> * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnfrd_1_1module_1_1_feed_priority_queue.html#af720bf38f8d6d8da7837462d76e7b2ae">tempOutgoingQueue</a></td></tr>
<tr class="memdesc:af720bf38f8d6d8da7837462d76e7b2ae"><td class="mdescLeft">&#160;</td><td class="mdescRight">A temporary array used for performance reasons by the main queueing thread.  <a href="#af720bf38f8d6d8da7837462d76e7b2ae"></a><br/></td></tr>
<tr class="memitem:a484173d3c982a589aba38e5c68ab110b"><td class="memItemLeft" align="right" valign="top">std::queue&lt; <a class="el" href="classnfrd_1_1module_1_1_queue_item.html">QueueItem</a> * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnfrd_1_1module_1_1_feed_priority_queue.html#a484173d3c982a589aba38e5c68ab110b">outgoingQueue</a></td></tr>
<tr class="memdesc:a484173d3c982a589aba38e5c68ab110b"><td class="mdescLeft">&#160;</td><td class="mdescRight">A buffer queue for any outgoing (PopFeed) items.  <a href="#a484173d3c982a589aba38e5c68ab110b"></a><br/></td></tr>
<tr class="memitem:a0af620070b3f6b9fc2f15fd72a7781a3"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classnfrd_1_1config_1_1_config_manager.html">nfrd::config::ConfigManager</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnfrd_1_1module_1_1_feed_priority_queue.html#a0af620070b3f6b9fc2f15fd72a7781a3">config</a></td></tr>
<tr class="memdesc:a0af620070b3f6b9fc2f15fd72a7781a3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Configuration access.  <a href="#a0af620070b3f6b9fc2f15fd72a7781a3"></a><br/></td></tr>
<tr class="memitem:ad831b7f66aceec212373feef445acaf2"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classnfrd_1_1log_1_1_log_manager.html">nfrd::log::LogManager</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnfrd_1_1module_1_1_feed_priority_queue.html#ad831b7f66aceec212373feef445acaf2">log</a></td></tr>
<tr class="memdesc:ad831b7f66aceec212373feef445acaf2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Access to logging system.  <a href="#ad831b7f66aceec212373feef445acaf2"></a><br/></td></tr>
<tr class="memitem:afdba4e55a881c579d694ce85fd6c3c11"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnfrd_1_1module_1_1_feed_priority_queue.html#afdba4e55a881c579d694ce85fd6c3c11">itemsPopped</a></td></tr>
<tr class="memdesc:afdba4e55a881c579d694ce85fd6c3c11"><td class="mdescLeft">&#160;</td><td class="mdescRight">Used internally, the number of items which have been popped from the heap and put on the outgoing queue since the heap was last prioritised/sorted.  <a href="#afdba4e55a881c579d694ce85fd6c3c11"></a><br/></td></tr>
<tr class="memitem:ac6d1f85b20b0711c9ec7f3094e6fff1e"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnfrd_1_1module_1_1_feed_priority_queue.html#ac6d1f85b20b0711c9ec7f3094e6fff1e">outgoingHasChanged</a></td></tr>
<tr class="memdesc:ac6d1f85b20b0711c9ec7f3094e6fff1e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Used to help synchronise the main queueing thread so that it only iterates when there is work to do.  <a href="#ac6d1f85b20b0711c9ec7f3094e6fff1e"></a><br/></td></tr>
<tr class="memitem:ab77f859bfff9ca41694376d7e9ec9d4f"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnfrd_1_1module_1_1_feed_priority_queue.html#ab77f859bfff9ca41694376d7e9ec9d4f">incomingHasChanged</a></td></tr>
<tr class="memdesc:ab77f859bfff9ca41694376d7e9ec9d4f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Used to help synchronise the main queueing thread so that it only iterates when there is work to do.  <a href="#ab77f859bfff9ca41694376d7e9ec9d4f"></a><br/></td></tr>
<tr class="memitem:a4cec5a83038d85b1de5aec5ff784c773"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnfrd_1_1module_1_1_feed_priority_queue.html#a4cec5a83038d85b1de5aec5ff784c773">isAlive</a></td></tr>
<tr class="memdesc:a4cec5a83038d85b1de5aec5ff784c773"><td class="mdescLeft">&#160;</td><td class="mdescRight">Used to keep the main queueing thread alive.  <a href="#a4cec5a83038d85b1de5aec5ff784c773"></a><br/></td></tr>
<tr class="memitem:ac507eb8ab999e6cc8b363853c6034c1c"><td class="memItemLeft" align="right" valign="top">const int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnfrd_1_1module_1_1_feed_priority_queue.html#ac507eb8ab999e6cc8b363853c6034c1c">MAXPOP</a></td></tr>
<tr class="memdesc:ac507eb8ab999e6cc8b363853c6034c1c"><td class="mdescLeft">&#160;</td><td class="mdescRight">The maximum number of items to pop into the outgoing queue before requiring a prioritise/sort on the heap.  <a href="#ac507eb8ab999e6cc8b363853c6034c1c"></a><br/></td></tr>
<tr class="memitem:a6341ca280b2616fea0e80ab3ff48b1b1"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnfrd_1_1module_1_1_feed_priority_queue.html#a6341ca280b2616fea0e80ab3ff48b1b1">numberOfUsersInSystem</a></td></tr>
<tr class="memdesc:a6341ca280b2616fea0e80ab3ff48b1b1"><td class="mdescLeft">&#160;</td><td class="mdescRight">The number of users in the system, used to help priority calculations.  <a href="#a6341ca280b2616fea0e80ab3ff48b1b1"></a><br/></td></tr>
<tr class="memitem:acddd97635cb491fc9e5d542d4c3572a4"><td class="memItemLeft" align="right" valign="top">boost::thread&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnfrd_1_1module_1_1_feed_priority_queue.html#acddd97635cb491fc9e5d542d4c3572a4">priorityQueueThread</a></td></tr>
<tr class="memdesc:acddd97635cb491fc9e5d542d4c3572a4"><td class="mdescLeft">&#160;</td><td class="mdescRight">The main queueing thread dedicated to this object.  <a href="#acddd97635cb491fc9e5d542d4c3572a4"></a><br/></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>Implements a queueing/threading model. </p>
<p>The model was designed to <br/>
 sort and prioritise the feeds in the background while providing a<br/>
 fast way of delegating work to background feeds. So to summarise <br/>
 the responsibilities of this class:<br/>
</p>
<ul>
<li>Proritising all feeds for processing<br/>
</li>
<li>Delegating work to threads (in a consumer/producer type model) </li>
</ul>
</div><hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="acc15d3e4750ce4415b04a19b6e701001"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">FeedPriorityQueue::FeedPriorityQueue </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classnfrd_1_1config_1_1_config_manager.html">nfrd::config::ConfigManager</a> &amp;&#160;</td>
          <td class="paramname"><em>config</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classnfrd_1_1log_1_1_log_manager.html">nfrd::log::LogManager</a> &amp;&#160;</td>
          <td class="paramname"><em>log</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>reserve</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialising Constructor for <a class="el" href="classnfrd_1_1module_1_1_feed_priority_queue.html" title="Implements a queueing/threading model.">FeedPriorityQueue</a>. </p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramname">config</td><td>The config manager to use </td></tr>
    <tr><td class="paramname">log</td><td>The log manager to use </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a5faeaf386c1986af6b401942a6d499f9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">FeedPriorityQueue::~FeedPriorityQueue </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Delete all dynamic memory, if any. </p>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="ae8a3cc2ceded41cbb6bc5d39ef50280c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void FeedPriorityQueue::CleanupQueue </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>When this module is stopped, cleanup queue is called to <br/>
 persist items back to the database. </p>

</div>
</div>
<a class="anchor" id="af2939a926d1338e4d771c470b36a10e6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">vector&lt; <a class="el" href="classnfrd_1_1module_1_1_queue_item.html">QueueItem</a> * &gt; FeedPriorityQueue::GetAllItems </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get a vector of all queue items. </p>
<p>Note the queue should be<br/>
 stopped before calling this function </p>

</div>
</div>
<a class="anchor" id="a45c30b19bce1ca34d44814d8cd88d4bf"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">boost::thread * FeedPriorityQueue::GetThread </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the thread that this priority queue is running under. </p>

</div>
</div>
<a class="anchor" id="a04a6880d52c95fce8fd236d35e83ac13"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void FeedPriorityQueue::IterateOnce </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Processes the priority queue (aka heap, aka vector) and<br/>
 the incoming and outgoing queues to ensure that they are<br/>
 all up to date. </p>
<p>Can be broken down into these operations:<br/>
</p>
<ul>
<li>Process incoming queue<br/>
</li>
<li>Re-calculate feed priority and re-sort the queue<br/>
</li>
<li>Process outgoing queue </li>
</ul>

</div>
</div>
<a class="anchor" id="a0f734801e447f59e0a24df00c1e2fda9"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void FeedPriorityQueue::MainLoop </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The main loop for the main queueing thread of the crawler <br/>
 waits for work executes IterateOnce when it has some. </p>
<p><br/>
 "Work" is classified as:<br/>
</p>
<ul>
<li>PopFeed is executed<br/>
</li>
<li>PushFeed is executed </li>
</ul>

</div>
</div>
<a class="anchor" id="ac300529968cafee4c247ba1ff022320f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void FeedPriorityQueue::PopFeed </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classnfrd_1_1module_1_1_queue_item.html">QueueItem</a> *&amp;&#160;</td>
          <td class="paramname"><em>item</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Removes a feed from the prioritised queue for processing. </p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramname">item</td><td>Pop an item off the heap and populate item </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a800c36c9d6fe69b513da269dfb22befc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void FeedPriorityQueue::PushFeed </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classnfrd_1_1module_1_1_queue_item.html">QueueItem</a> *&#160;</td>
          <td class="paramname"><em>item</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Adds a feed on to the queue. </p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramname">item</td><td>Put the given item onto the heap </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a1d84a4de70d5942c5eac4b577c8c35a3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void FeedPriorityQueue::SetNumberOfUsersInSystem </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>numberOfUsersInSystem</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the number of users in the system. </p>

</div>
</div>
<a class="anchor" id="a9520dc36eb1167ca4361f958f94414f9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void FeedPriorityQueue::Start </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Start the priority queue/thread. </p>

</div>
</div>
<a class="anchor" id="aab7bfe79d1fe3df9883931bc072ae2f7"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void nfrd::module::FeedPriorityQueue::StartThreads </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Setup and run all queue worker threads (<a class="el" href="classnfrd_1_1module_1_1_crawler_thread.html" title="A worker class representing a thread.">CrawlerThread</a>) </p>

</div>
</div>
<a class="anchor" id="a117251d3ae7e96afbeec75d4fe1a8964"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void FeedPriorityQueue::Stop </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Stop the priority queue/thread<br/>
 Only call priority queue stop when you are 100% sure that<br/>
 nothing else is using the queue. </p>

</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="a0af620070b3f6b9fc2f15fd72a7781a3"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classnfrd_1_1config_1_1_config_manager.html">nfrd::config::ConfigManager</a>&amp; nfrd::module::FeedPriorityQueue::config</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Configuration access. </p>

</div>
</div>
<a class="anchor" id="a14562cabf4c98e481c43b124dfd6a200"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">boost::mutex nfrd::module::FeedPriorityQueue::heapMutex</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">mutable</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Mutex to synchronise access to the internal heap. </p>

</div>
</div>
<a class="anchor" id="ab77f859bfff9ca41694376d7e9ec9d4f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool nfrd::module::FeedPriorityQueue::incomingHasChanged</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Used to help synchronise the main queueing thread so that it only iterates when there is work to do. </p>
<p>Updated by PushFeed </p>

</div>
</div>
<a class="anchor" id="ab970d83a4d27d49c4d19537f3d38d0fc"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">boost::mutex nfrd::module::FeedPriorityQueue::incomingMutex</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">mutable</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Mutex to synchronise access to the incoming queue. </p>

</div>
</div>
<a class="anchor" id="a47b8166e98beb2c3411d37c829d6cc3b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::queue&lt;<a class="el" href="classnfrd_1_1module_1_1_queue_item.html">QueueItem</a>*&gt; nfrd::module::FeedPriorityQueue::incomingQueue</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>A buffer queue for any incoming (PushFeed) items. </p>

</div>
</div>
<a class="anchor" id="a4cec5a83038d85b1de5aec5ff784c773"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool nfrd::module::FeedPriorityQueue::isAlive</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Used to keep the main queueing thread alive. </p>
<p>Cannot use the module's "status" as this is being used by another section of the code, if both used the same variable/value then the main queueing thead would not safely stop. </p>

</div>
</div>
<a class="anchor" id="a15603b252caef5f4eb2cf05f32fd09b0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;<a class="el" href="classnfrd_1_1module_1_1_queue_item.html">QueueItem</a>*&gt; nfrd::module::FeedPriorityQueue::itemQueue</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The main priority queue (heap) only the main queueing thread is allowed to touch this! </p>

</div>
</div>
<a class="anchor" id="afdba4e55a881c579d694ce85fd6c3c11"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int nfrd::module::FeedPriorityQueue::itemsPopped</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Used internally, the number of items which have been popped from the heap and put on the outgoing queue since the heap was last prioritised/sorted. </p>

</div>
</div>
<a class="anchor" id="ad831b7f66aceec212373feef445acaf2"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classnfrd_1_1log_1_1_log_manager.html">nfrd::log::LogManager</a>&amp; nfrd::module::FeedPriorityQueue::log</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Access to logging system. </p>

</div>
</div>
<a class="anchor" id="ac507eb8ab999e6cc8b363853c6034c1c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const int nfrd::module::FeedPriorityQueue::MAXPOP</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The maximum number of items to pop into the outgoing queue before requiring a prioritise/sort on the heap. </p>
<p>Also represents the maximum number of items allowed in the outgoing queue at once. Changing this number to a higher number will be more effecient but will make the overall prioritising algorithm less effective. Making it smaller will in turn, decrease performance. This is configurable in the config, but changes to this are not currently supported during module runtime. </p>

</div>
</div>
<a class="anchor" id="a6341ca280b2616fea0e80ab3ff48b1b1"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int nfrd::module::FeedPriorityQueue::numberOfUsersInSystem</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The number of users in the system, used to help priority calculations. </p>

</div>
</div>
<a class="anchor" id="ac6d1f85b20b0711c9ec7f3094e6fff1e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool nfrd::module::FeedPriorityQueue::outgoingHasChanged</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Used to help synchronise the main queueing thread so that it only iterates when there is work to do. </p>
<p>Updated by PopFeed </p>

</div>
</div>
<a class="anchor" id="aef8b21c579190f4e62c4b23d3870e671"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">boost::mutex nfrd::module::FeedPriorityQueue::outgoingMutex</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">mutable</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Mutex to synchronise access to the outgoing queue. </p>

</div>
</div>
<a class="anchor" id="a484173d3c982a589aba38e5c68ab110b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::queue&lt;<a class="el" href="classnfrd_1_1module_1_1_queue_item.html">QueueItem</a>*&gt; nfrd::module::FeedPriorityQueue::outgoingQueue</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>A buffer queue for any outgoing (PopFeed) items. </p>

</div>
</div>
<a class="anchor" id="a5fb97a0b063d47f04f88838f2319ed14"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">boost::condition_variable nfrd::module::FeedPriorityQueue::outgoingQueueCondition</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">mutable</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Condition for waiting on more items to be available in the outgoing queue for the worker threads (notified by the main queueing thread) </p>

</div>
</div>
<a class="anchor" id="acddd97635cb491fc9e5d542d4c3572a4"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">boost::thread nfrd::module::FeedPriorityQueue::priorityQueueThread</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The main queueing thread dedicated to this object. </p>

</div>
</div>
<a class="anchor" id="a0da96988220a5a3dd4ad7fb2f2ac5ec4"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">boost::condition_variable nfrd::module::FeedPriorityQueue::queueUpdateCondition</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">mutable</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Condition for the main queueing thread to wait on PushFeed and PopFeed executions (notified by the worker threads) </p>

</div>
</div>
<a class="anchor" id="af720bf38f8d6d8da7837462d76e7b2ae"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;<a class="el" href="classnfrd_1_1module_1_1_queue_item.html">QueueItem</a>*&gt; nfrd::module::FeedPriorityQueue::tempOutgoingQueue</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>A temporary array used for performance reasons by the main queueing thread. </p>

</div>
</div>
<a class="anchor" id="a059a9416cb88fc8a73e1ad0932a0d58c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">boost::mutex nfrd::module::FeedPriorityQueue::updatedMutex</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">mutable</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Mutex to synchronise access to the outgoingHasChanged and incomingHasChanged variables. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>include/nfrd/<a class="el" href="_feed_priority_queue_8h_source.html">FeedPriorityQueue.h</a></li>
<li>src/<a class="el" href="_feed_priority_queue_8cpp.html">FeedPriorityQueue.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Oct 18 2012 22:03:06 for News Feeder Refresh Daemon (nfrd) by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.1.1
</small></address>
</body>
</html>
